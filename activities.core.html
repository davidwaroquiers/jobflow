<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="activities.managers package" href="activities.managers.html" /><link rel="prev" title="activities package" href="activities.html" />

    <meta name="generator" content="sphinx-3.2.1, furo 2021.03.20.beta30"/>
        <title>activities.core package - Activities v</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Activities v</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Activities v</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
</ul>
<p><span class="caption-text">User Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="job.html">Job</a></li>
<li class="toctree-l1"><a class="reference internal" href="activity.html">Activity</a></li>
</ul>
<p><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to activities</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hackingmaterials/activities">activities on GitHub</a></li>
</ul>
<p><span class="caption-text">Function Reference</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="activities.html">API reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">activities.core package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="activities.managers.html">activities.managers package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="activities.managers.fireworks.html">activities.managers.fireworks package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="activities-core-package">
<h1>activities.core package<a class="headerlink" href="#activities-core-package" title="Permalink to this headline">¶</a></h1>
<section id="module-activities.core.activity">
<span id="activities-core-activity-module"></span><h2>activities.core.activity module<a class="headerlink" href="#module-activities.core.activity" title="Permalink to this headline">¶</a></h2>
<p>Define base Activity object.</p>
<dl class="py class">
<dt id="activities.core.activity.JobOrder">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.activity.</code><code class="sig-name descname">JobOrder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#JobOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.JobOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#activities.core.util.ValueEnum" title="activities.core.util.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">activities.core.util.ValueEnum</span></code></a></p>
<p>Options to control the order of job execution.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AUTO</span></code>: Automatically determine the job order based on input and output
references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LINEAR</span></code>: Run the jobs in the order they appear in the jobs array.</p></li>
</ul>
<dl class="py attribute">
<dt id="activities.core.activity.JobOrder.AUTO">
<code class="sig-name descname">AUTO</code><em class="property"> = 'auto'</em><a class="headerlink" href="#activities.core.activity.JobOrder.AUTO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="activities.core.activity.JobOrder.LINEAR">
<code class="sig-name descname">LINEAR</code><em class="property"> = 'linear'</em><a class="headerlink" href="#activities.core.activity.JobOrder.LINEAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="activities.core.activity.Activity">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.activity.</code><code class="sig-name descname">Activity</code><span class="sig-paren">(</span><em class="sig-param">jobs</em>, <em class="sig-param">output=None</em>, <em class="sig-param">name='Activity'</em>, <em class="sig-param">order=&lt;JobOrder.AUTO: 'auto'&gt;</em>, <em class="sig-param">uuid=None</em>, <em class="sig-param">host=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#Activity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.Activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>An Activity contains a collection of Jobs or other Activities to execute.</p>
<p>The <a class="reference internal" href="activity.html#activities.core.activity.Activity" title="activities.core.activity.Activity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Activity</span></code></a> object is the main tool for constructing workflows. Activities
can either contain jobs or other activities. Like <code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code> objects, activities
can also have outputs, however, these are not explicitly stored in the database.
Instead, the outputs of an Activity act to structure the outputs of the jobs
contained within the activity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobs</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="activity.html#activities.core.activity.Activity" title="activities.core.activity.Activity"><em>Activity</em></a><em>, </em><em>activities.Job</em><em>]</em><em>]</em><em>, </em><em>activities.Job</em><em>, </em><a class="reference internal" href="activity.html#activities.core.activity.Activity" title="activities.core.activity.Activity"><em>Activity</em></a><em>]</em>) – The jobs to be run as a list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code> or <a class="reference internal" href="activity.html#activities.core.activity.Activity" title="activities.core.activity.Activity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Activity</span></code></a> objects.</p></li>
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The output of the activity. These should come from the output of one or more
of the jobs.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The activity name.</p></li>
<li><p><strong>order</strong> (<a class="reference internal" href="#activities.core.activity.JobOrder" title="activities.core.activity.JobOrder"><em>JobOrder</em></a>) – The order in which the jobs should be exectuted. The default is to determine
the order automatically based on the connections between jobs.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the activity. This is genenrated automatically.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the host activity. This is set automatically when an activity
is included in the jobs array of another activity.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If a job in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array is already part of another activity.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the inputs of all jobs in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array are
    missing.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the activity <code class="docutils literal notranslate"><span class="pre">output</span></code> are missing.</p></li>
</ul>
</dd>
<dt class="field-odd">Warns</dt>
<dd class="field-odd"><p><strong>UserWarning</strong> – If a <code class="docutils literal notranslate"><span class="pre">Job</span></code> or <code class="docutils literal notranslate"><span class="pre">Activity</span></code> object is used as the Activity <code class="docutils literal notranslate"><span class="pre">output</span></code> rather
than an <code class="docutils literal notranslate"><span class="pre">OutputReference</span></code>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">job</span></code>, <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#activities.core.activity.JobOrder" title="activities.core.activity.JobOrder"><code class="xref py py-class docutils literal notranslate"><span class="pre">JobOrder</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Below we define a simple job to add two numbers, and create an activity containing
two connected add jobs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Activity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_first</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_second</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">add_first</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">])</span>
</pre></div>
</div>
<p>This activity does not expose any of the outputs of the jobs contained within it.
We could instead “register” the output of the second add as the output of the
activity.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">add_second</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>This will the activity to be used in another activity. In this way, activities
can be infinitely nested. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_third</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">activity</span><span class="p">,</span> <span class="n">add_third</span><span class="p">])</span>
</pre></div>
</div>
<p>Activities can be run using an activity manager. These enable running activities
locally or on compute clusters (using the FireWorks manager).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities.managers.local</span> <span class="kn">import</span> <span class="n">run_locally</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">run_locally</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="activities.core.activity.Activity.job_uuids">
<em class="property">property </em><code class="sig-name descname">job_uuids</code><a class="headerlink" href="#activities.core.activity.Activity.job_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p>The uuids of every job contained in the activity (including nested activities).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The uuids of all jobs in the activity (including nested activities).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.activity.Activity.graph">
<em class="property">property </em><code class="sig-name descname">graph</code><a class="headerlink" href="#activities.core.activity.Activity.graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a graph indicating the connectivity of jobs in the activity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The graph showing the connectivity of the jobs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DiGraph</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.activity.Activity.draw_graph">
<code class="sig-name descname">draw_graph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#Activity.draw_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.Activity.draw_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the activity graph using matplotlib.</p>
<p>Requires matplotlib to be installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The matplotlib pyplot state.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pyplot</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.activity.Activity.iteractivity">
<code class="sig-name descname">iteractivity</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#Activity.iteractivity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.Activity.iteractivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through the jobs of the activity.</p>
<p>The jobs are yielded such that the job output references can always be
resolved. I.e., root nodes of the activity graph are always returned first.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>Job, list[str]</em> – The Job and the uuids of any parent jobs (not to be confused with the host
activity).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[Tuple[‘activities.Job’, List[<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]], <a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a>, <a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.activity.Activity.update_kwargs">
<code class="sig-name descname">update_kwargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update</span></em>, <em class="sig-param"><span class="n">name_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">function_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dict_mod</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#Activity.update_kwargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.Activity.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the kwargs of all jobs in the activity .</p>
<p>Note that updates will be applied to jobs in nested activities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the job name.</p></li>
<li><p><strong>function_filter</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – Only filter matching functions.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="#activities.core.dict_mods.DictMods" title="activities.core.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider an activity containing a simple job with a <code class="docutils literal notranslate"><span class="pre">number</span></code> keyword argument.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Activity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all jobs in the activity have a kwarg called number. However,
when this is not the case this will result in the bad input kwargs for some
jobs. To only apply the update to the correct jobs, filters can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filter</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">add</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="activities.core.activity.Activity.update_maker_kwargs">
<code class="sig-name descname">update_maker_kwargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update</span></em>, <em class="sig-param"><span class="n">name_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">class_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nested</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">dict_mod</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/activity.html#Activity.update_maker_kwargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.activity.Activity.update_maker_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of any <a class="reference internal" href="#activities.core.maker.Maker" title="activities.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects in the jobs.</p>
<p>Note that updates will be applied to jobs in any inner activities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>activities.Maker</em><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="#activities.core.dict_mods.DictMods" title="activities.core.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following activity containing jobs from a Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">Activity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all Makers in the activity have a kwarg called number.
However, when this is not the case this will result in the bad input kwargs
for some Makers. To only apply the update to the correct Makers, filters can be
used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filder</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. Consider the following case
for a Maker that produces a job that restarts.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">RestartMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"restart"</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">restart_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="n">restart_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">RestartMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">RestartMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activity</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
</section>
<section id="module-activities.core.dict_mods">
<span id="activities-core-dict-mods-module"></span><h2>activities.core.dict_mods module<a class="headerlink" href="#module-activities.core.dict_mods" title="Permalink to this headline">¶</a></h2>
<p>This module allows you to modify a dict (a spec) using another dict (an instruction).
The main method of interest is <a class="reference internal" href="#activities.core.dict_mods.apply_mod" title="activities.core.dict_mods.apply_mod"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_mod</span></code></a>.</p>
<p>This code is based heavily on the Ansible class of <a class="reference external" href="https://pypi.python.org/pypi/custodian">custodian</a>, but simplifies it considerably for the
limited use cases required by activities.</p>
<dl class="py class">
<dt id="activities.core.dict_mods.DictMods">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.dict_mods.</code><code class="sig-name descname">DictMods</code><a class="reference internal" href="_modules/activities/core/dict_mods.html#DictMods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.dict_mods.DictMods" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class to define mongo-like modifications on a dict.</p>
<p>Supported keywords include the following Mongo-based keywords, with the usual
meanings (refer to Mongo documentation for information):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_inc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_set</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_unset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_push</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_push_all</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_add_to_set</span></code> (but <code class="docutils literal notranslate"><span class="pre">_each</span></code> is not supported)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pull</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pull_all</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_rename</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">_set</span></code> does not support modification of nested dicts using the mongo
<code class="docutils literal notranslate"><span class="pre">{"a.b":1}</span></code> notation. This is because mongo does not allow keys with “.” to be
inserted. Instead, nested dict modification is supported using a special “-&gt;”
keyword, e.g. <code class="docutils literal notranslate"><span class="pre">{"a-&gt;b":</span> <span class="pre">1}</span></code></p>
</div>
</dd></dl>
<dl class="py function">
<dt id="activities.core.dict_mods.apply_mod">
<code class="sig-prename descclassname">activities.core.dict_mods.</code><code class="sig-name descname">apply_mod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modification</span></em>, <em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/dict_mods.html#apply_mod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.dict_mods.apply_mod" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a dict mod to an object.</p>
<p>Note that modify makes actual in-place modifications. It does not return a copy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modification</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Modification must be <code class="docutils literal notranslate"><span class="pre">{action_keyword</span> <span class="pre">:</span> <span class="pre">settings}</span></code>, where action_keyword is a
supported DictMod.</p></li>
<li><p><strong>obj</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – A dict to be modified.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-activities.core.graph">
<span id="activities-core-graph-module"></span><h2>activities.core.graph module<a class="headerlink" href="#module-activities.core.graph" title="Permalink to this headline">¶</a></h2>
<p>Tools for constructing Job and Activity graphs.</p>
<dl class="py function">
<dt id="activities.core.graph.itergraph">
<code class="sig-prename descclassname">activities.core.graph.</code><code class="sig-name descname">itergraph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/graph.html#itergraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.graph.itergraph" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> (<em>networkx.classes.digraph.DiGraph</em>) – </p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.graph.draw_graph">
<code class="sig-prename descclassname">activities.core.graph.</code><code class="sig-name descname">draw_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span></em>, <em class="sig-param"><span class="n">layout_function</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/graph.html#draw_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.graph.draw_graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt id="activities.core.graph.to_pydot">
<code class="sig-prename descclassname">activities.core.graph.</code><code class="sig-name descname">to_pydot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">activity</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/graph.html#to_pydot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.graph.to_pydot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</section>
<section id="module-activities.core.job">
<span id="activities-core-job-module"></span><h2>activities.core.job module<a class="headerlink" href="#module-activities.core.job" title="Permalink to this headline">¶</a></h2>
<p>This module defines functions and classes for representing Job objects.</p>
<dl class="py function">
<dt id="activities.core.job.job">
<code class="sig-prename descclassname">activities.core.job.</code><code class="sig-name descname">job</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">job_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.job" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a function to produce a <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<p><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects are delayed function calls that can be used in an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Activity</span></code>. A job is a composed of the function name, the arguments for the
function, and the outputs of the function. This decorator makes it simple to create
job objects directly from a function definition. See the examples for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – A function to wrap. This should not be specified directly and is implied
by the decorator.</p></li>
<li><p><strong>outputs</strong> – If the function returns an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> object, the outputs option should be
specified to enable static parameter checking. If the function returns a
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code> object, then the outputs should be set os the class of the
detour activity outputs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_message</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">"I am a Job"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span> <span class="o">=</span> <span class="n">print_message</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">print_job</span><span class="p">)</span>
<span class="go">&lt;class 'activities.core.job.Job'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span><span class="o">.</span><span class="n">function</span>
<span class="go">('__main__', 'print_message')</span>
</pre></div>
</div>
<p>Jobs can have required and optional parameters.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span> <span class="o">=</span> <span class="n">print_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_args</span>
<span class="go">(1, )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_kwargs</span>
<span class="go">{"b": 2}</span>
</pre></div>
</div>
<p>If the function returns a value it can be referenced using the <code class="docutils literal notranslate"><span class="pre">output</span></code>
attribute of the job.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span><span class="o">.</span><span class="n">output</span>
<span class="go">Reference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9')</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the task has not yet been run, the output value is <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code>
object. References are automatically converted to their computed values
(resolved) when the task runs.</p>
</div>
<p>If a dictionary of values is returned, the values can be referenced in the usual
manner</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities.core.outputs</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">"sum"</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"product"</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">}</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">"sum"</span><span class="p">]</span>
<span class="go">Reference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9', 'sum')</span>
</pre></div>
</div>
<p>A better approach is to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> classes. These have several benefits
including the ability to make use of static parameter checking to ensure that
the task outputs are valid. To use an outputs class, it should be specified
in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">task</span></code> decorator options.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities.core.outputs</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span><span class="p">(</span><span class="n">outputs</span><span class="o">=</span><span class="n">Number</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">Number</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">number</span>
<span class="go">Number(number=Reference(abeb6f48-9b34-4698-ab69-e4dc2127ebe9', 'number'))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">bad_output</span>
<span class="go">AttributeError: 'Number' object has no attribute 'bad_output'</span>
</pre></div>
</div>
<p>To indicate that a task has no outputs, the <code class="docutils literal notranslate"><span class="pre">outputs</span></code> parameter should be set to
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span><span class="p">(</span><span class="n">outputs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>Tasks can return <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code> objects that cause new activities to be added to the
Activity graph. In this case, the outputs class of the Detour activity should be
specified in the task <code class="docutils literal notranslate"><span class="pre">outputs</span></code> option.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities</span> <span class="kn">import</span> <span class="n">Activity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities.core.outputs</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span><span class="p">(</span><span class="n">outputs</span><span class="o">=</span><span class="n">Number</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">detour_add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">add_task</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">activity</span> <span class="o">=</span> <span class="n">Activity</span><span class="p">(</span><span class="s2">"My detour"</span><span class="p">,</span> <span class="p">[</span><span class="n">add_task</span><span class="p">],</span> <span class="n">add_task</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">Detour</span><span class="p">(</span><span class="n">activity</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-func docutils literal notranslate"><span class="pre">Job()</span></code></a>, <code class="xref py py-func docutils literal notranslate"><span class="pre">Activity()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">Outputs()</span></code></p>
</div>
</dd></dl>
<dl class="py class">
<dt id="activities.core.job.Job">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.job.</code><code class="sig-name descname">Job</code><span class="sig-paren">(</span><em class="sig-param">function_source</em>, <em class="sig-param">function_name</em>, <em class="sig-param">function_args=&lt;factory&gt;</em>, <em class="sig-param">function_kwargs=&lt;factory&gt;</em>, <em class="sig-param">output_schema=None</em>, <em class="sig-param">uuid=&lt;factory&gt;</em>, <em class="sig-param">index=1</em>, <em class="sig-param">name=None</em>, <em class="sig-param">data=False</em>, <em class="sig-param">metadata=&lt;factory&gt;</em>, <em class="sig-param">config=&lt;factory&gt;</em>, <em class="sig-param">host=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#Job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>A <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> is a delayed function call that can be used in an <a class="reference internal" href="activity.html#activities.core.activity.Activity" title="activities.core.activity.Activity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Activity</span></code></a>.</p>
<p>In general, one should not create <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects directly but instead use
the <a class="reference internal" href="#activities.core.job.job" title="activities.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator on a function. Any calls to a decorated function will
return an <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> – The delayed function to run specified as a tuple of (module, function_name).</p></li>
<li><p><strong>args</strong> – The positional arguments to the function call.</p></li>
<li><p><strong>kwargs</strong> – The keyword arguments to the function call.</p></li>
<li><p><strong>output</strong> – The output of the activity. Note that until the activity is run this will be
a reference.</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>BaseModel</em><em>]</em><em>]</em>) – A pydantic model that defines the schema of the output.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A unique identifier for the job.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – A dictionary of information that will get stored alongside the</p></li>
<li><p><strong>function_source</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>activities.Maker</em><em>]</em>) – </p></li>
<li><p><strong>function_name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
<li><p><strong>function_args</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>..</em><em>]</em>) – </p></li>
<li><p><strong>function_kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – </p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – </p></li>
<li><p><strong>data</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#activities.core.job.JobConfig" title="activities.core.job.JobConfig"><em>JobConfig</em></a>) – </p></li>
<li><p><strong>host</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Builtin functions such as <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#print" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print</span></code></a> can be specified using the <code class="docutils literal notranslate"><span class="pre">builtins</span></code>
module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_task</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"builtins"</span><span class="p">,</span> <span class="s2">"print"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"I am a job"</span><span class="p">,</span> <span class="p">))</span>
</pre></div>
</div>
<p>Other functions should specify the full module path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"os.path"</span><span class="p">,</span> <span class="s2">"join"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"folder"</span><span class="p">,</span> <span class="s2">"filename.txt"</span><span class="p">))</span>
</pre></div>
</div>
<p>To use custom functions in a job, the functions should be importable (i.e. not
defined in another function). For example, if the following function is defined
in the <code class="docutils literal notranslate"><span class="pre">my_package</span></code> module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"my_package"</span><span class="p">,</span> <span class="s2">"add"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects can be executed using the <a class="reference internal" href="#activities.core.job.Job.run" title="activities.core.job.Job.run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run()</span></code></a> method. The output is
always a <a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> object that contains the outputs and other options that
control the activity execution.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">add_task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">outputs</span>
<span class="go">Value(value=3)</span>
</pre></div>
</div>
<p>The default output type of a job is a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Value</span></code> object that has a single
field <cite>value</cite>. If the function returns more than one outputs then
the output must be specified as dictionary or a custom <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> class.</p>
<p>Using an <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> object also enables static parameter checking.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">activities.core.outputs</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">Number</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"my_package"</span><span class="p">,</span> <span class="s2">"add"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">outputs</span><span class="o">=</span><span class="n">Number</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">add_task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">outputs</span>
<span class="go">Number(number=3)</span>
</pre></div>
</div>
<p>More details are given in the <a class="reference internal" href="#activities.core.job.job" title="activities.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator docstring.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#activities.core.job.job" title="activities.core.job.job"><code class="xref py py-class docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Outputs</span></code></p>
</div>
<dl class="py method">
<dt id="activities.core.job.Job.input_references">
<em class="property">property </em><code class="sig-name descname">input_references</code><a class="headerlink" href="#activities.core.job.Job.input_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Find <a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects in the job inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The references in the inputs to the job.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference">Reference</a>, ..)</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.job.Job.output_references">
<em class="property">property </em><code class="sig-name descname">output_references</code><a class="headerlink" href="#activities.core.job.Job.output_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Find <a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects in the job outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The references belonging to the job outputs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference">Reference</a>, ..)</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.job.Job.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#Job.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.Job.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the job.</p>
<p>If the job has inputs that are <a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects, then they will need
to be resolved before the job can run. See the docstring for
<a class="reference internal" href="#activities.core.reference.Reference.resolve" title="activities.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>store</strong> (<em>activities.ActivityStore</em>) – A maggma store to use for resolving references and storing job outputs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A the response of the job, containing the outputs, and other settings
that determine the activity execution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response">Response</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the job function cannot be imported.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Response()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Reference()</span></code></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="activities.core.job.Job.resolve_args">
<code class="sig-name descname">resolve_args</code><span class="sig-paren">(</span><em class="sig-param">store</em>, <em class="sig-param">on_missing=&lt;ReferenceFallback.ERROR: 'error'&gt;</em>, <em class="sig-param">inplace=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#Job.resolve_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.Job.resolve_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve any <a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects in the input arguments.</p>
<p>See the docstring for <a class="reference internal" href="#activities.core.reference.Reference.resolve" title="activities.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>activities.ActivityStore</em>) – A maggma store to use for resolving references.</p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#activities.core.reference.ReferenceFallback" title="activities.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – What to do if the reference cannot be resolved. See the docstring
for <a class="reference internal" href="#activities.core.reference.Reference.resolve" title="activities.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve</span></code></a> for the available options.
Whether to raise an error if a reference cannot be resolved.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Update the arguments of the current job or return a new job object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A job with the references resolved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job">Job</a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="activities.core.job.Response">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.job.</code><code class="sig-name descname">Response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">restart</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">detour</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">addition</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stored_data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop_children</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">stop_activities</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#Response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The <a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> contains the output, detours, and stop commands of a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The job output.</p></li>
<li><p><strong>detour</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>activities.Activity</em><em>, </em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – An activity or job to detour to.</p></li>
<li><p><strong>restart</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>activities.Activity</em><em>, </em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – An activity or job to replace the current job.</p></li>
<li><p><strong>store</strong> – Data to be stored by the activity manager.</p></li>
<li><p><strong>stop_children</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop any children of the current activity.</p></li>
<li><p><strong>stop_activities</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop executing all remaining jobs.</p></li>
<li><p><strong>addition</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>activities.Activity</em><em>, </em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>stored_data</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py method">
<dt id="activities.core.job.Response.from_job_returns">
<em class="property">classmethod </em><code class="sig-name descname">from_job_returns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">job_returns</span></em>, <em class="sig-param"><span class="n">output_schema</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#Response.from_job_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.Response.from_job_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a <a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> from the outputs of a <a class="reference internal" href="#activities.core.job.Job" title="activities.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_returns</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – <p>The outputs of a job. Should be a single or list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Restart</span></code>, or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code> objects. Only
one of each type of object is supported.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> objects should not be specified
simultaneously. The outputs of the detour activity will be used instead.</p>
</div>
</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>BaseModel</em><em>]</em><em>]</em>) – The outputs class associated with the job. Used to enforce a schema for the
outputs. Currently, only a warning will be given if the job outputs do not
match the expected outputs class.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The job response controlling the data to store and activity execution
options.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#activities.core.job.Response" title="activities.core.job.Response">Response</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the job returns type ares not <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code>,
    <code class="xref py py-obj docutils literal notranslate"><span class="pre">Restart</span></code>, or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code> objects.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If more than one of the same return type is given.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Outputs()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Store()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Detour()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Restart()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Stop()</span></code></p>
</div>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="activities.core.job.JobConfig">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.job.</code><code class="sig-name descname">JobConfig</code><span class="sig-paren">(</span><em class="sig-param">resolve_references: 'bool' = True</em>, <em class="sig-param">on_missing_references: 'ReferenceFallback' = &lt;ReferenceFallback.ERROR: 'error'&gt;</em>, <em class="sig-param">manager_config: 'dict' = &lt;factory&gt;</em>, <em class="sig-param">expose_store: 'bool' = False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/job.html#JobConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.job.JobConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resolve_references</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
<li><p><strong>on_missing_references</strong> (<a class="reference internal" href="#activities.core.reference.ReferenceFallback" title="activities.core.reference.ReferenceFallback"><em>activities.core.reference.ReferenceFallback</em></a>) – </p></li>
<li><p><strong>manager_config</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – </p></li>
<li><p><strong>expose_store</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-activities.core.maker">
<span id="activities-core-maker-module"></span><h2>activities.core.maker module<a class="headerlink" href="#module-activities.core.maker" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="activities.core.maker.Maker">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.maker.</code><code class="sig-name descname">Maker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></span> <span class="o">=</span> <span class="default_value">'Maker'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/maker.html#Maker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.maker.Maker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/abc.html#abc.ABC" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py attribute">
<dt id="activities.core.maker.Maker.name">
<code class="sig-name descname">name</code><em class="property">: <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></em><em class="property"> = 'Maker'</em><a class="headerlink" href="#activities.core.maker.Maker.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="activities.core.maker.Maker.make">
<em class="property">abstract </em><code class="sig-name descname">make</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/maker.html#Maker.make"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.maker.Maker.make" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[activities.Activity, activities.Job]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.maker.Maker.update_kwargs">
<code class="sig-name descname">update_kwargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update</span></em>, <em class="sig-param"><span class="n">name_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">class_filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nested</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">dict_mod</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/maker.html#Maker.update_kwargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.maker.Maker.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – </p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><a class="reference internal" href="#activities.core.maker.Maker" title="activities.core.maker.Maker"><em>Maker</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
<section id="module-activities.core.reference">
<span id="activities-core-reference-module"></span><h2>activities.core.reference module<a class="headerlink" href="#module-activities.core.reference" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="activities.core.reference.ReferenceFallback">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">ReferenceFallback</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#ReferenceFallback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.ReferenceFallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#activities.core.util.ValueEnum" title="activities.core.util.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">activities.core.util.ValueEnum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt id="activities.core.reference.ReferenceFallback.ERROR">
<code class="sig-name descname">ERROR</code><em class="property"> = 'error'</em><a class="headerlink" href="#activities.core.reference.ReferenceFallback.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="activities.core.reference.ReferenceFallback.NONE">
<code class="sig-name descname">NONE</code><em class="property"> = 'none'</em><a class="headerlink" href="#activities.core.reference.ReferenceFallback.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="activities.core.reference.ReferenceFallback.PASS">
<code class="sig-name descname">PASS</code><em class="property"> = 'pass'</em><a class="headerlink" href="#activities.core.reference.ReferenceFallback.PASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="activities.core.reference.Reference">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">Reference</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uuid</span></em>, <em class="sig-param"><span class="n">attributes</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="n">output_schema</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#Reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.main.BaseModel</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
<li><p><strong>attributes</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>..</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py attribute">
<dt id="activities.core.reference.Reference.uuid">
<code class="sig-name descname">uuid</code><a class="headerlink" href="#activities.core.reference.Reference.uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="activities.core.reference.Reference.attributes">
<code class="sig-name descname">attributes</code><a class="headerlink" href="#activities.core.reference.Reference.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="activities.core.reference.Reference.output_schema">
<code class="sig-name descname">output_schema</code><a class="headerlink" href="#activities.core.reference.Reference.output_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="activities.core.reference.Reference.resolve">
<code class="sig-name descname">resolve</code><span class="sig-paren">(</span><em class="sig-param">store=None</em>, <em class="sig-param">cache=None</em>, <em class="sig-param">on_missing=&lt;ReferenceFallback.ERROR: 'error'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#Reference.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.Reference.resolve" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>Optional</em><em>[</em><em>activities.ActivityStore</em><em>]</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#activities.core.reference.ReferenceFallback" title="activities.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.reference.Reference.set_uuid">
<code class="sig-name descname">set_uuid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uuid</span></em>, <em class="sig-param"><span class="n">inplace</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#Reference.set_uuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.Reference.set_uuid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="activities.core.reference.Reference.as_dict">
<code class="sig-name descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#Reference.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.Reference.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.reference.resolve_references">
<code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">resolve_references</code><span class="sig-paren">(</span><em class="sig-param">references</em>, <em class="sig-param">store</em>, <em class="sig-param">cache=None</em>, <em class="sig-param">on_missing=&lt;ReferenceFallback.ERROR: 'error'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#resolve_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>references</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference"><em>Reference</em></a><em>]</em>) – </p></li>
<li><p><strong>store</strong> (<em>activities.ActivityStore</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#activities.core.reference.ReferenceFallback" title="activities.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[<a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference">Reference</a>, Any]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.reference.find_and_get_references">
<code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">find_and_get_references</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#find_and_get_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.find_and_get_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>arg</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#activities.core.reference.Reference" title="activities.core.reference.Reference">activities.core.reference.Reference</a>, ..]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.reference.find_and_resolve_references">
<code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">find_and_resolve_references</code><span class="sig-paren">(</span><em class="sig-param">arg</em>, <em class="sig-param">store</em>, <em class="sig-param">cache=None</em>, <em class="sig-param">on_missing=&lt;ReferenceFallback.ERROR: 'error'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#find_and_resolve_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.find_and_resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>Any</em>) – </p></li>
<li><p><strong>store</strong> (<em>activities.ActivityStore</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#activities.core.reference.ReferenceFallback" title="activities.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.reference.validate_schema_access">
<code class="sig-prename descclassname">activities.core.reference.</code><code class="sig-name descname">validate_schema_access</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">item</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/reference.html#validate_schema_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.reference.validate_schema_access" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Type</em><em>[</em><em>pydantic.main.BaseModel</em><em>]</em>) – </p></li>
<li><p><strong>item</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-activities.core.util">
<span id="activities-core-util-module"></span><h2>activities.core.util module<a class="headerlink" href="#module-activities.core.util" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="activities.core.util.ValueEnum">
<em class="property">class </em><code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">ValueEnum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#ValueEnum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.ValueEnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/enum.html#enum.Enum" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>Enum that serializes to string as the value and can be compared against a string.</p>
<dl class="py method">
<dt id="activities.core.util.ValueEnum.as_dict">
<code class="sig-name descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#ValueEnum.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.ValueEnum.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.find_key">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">find_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">include_end</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">nested</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#find_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.find_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the route to key: value pairs in a dictionary.</p>
<p>This function works on nested dictionaries, lists, and tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Any</em><em>]</em><em>]</em>) – A dict or list of dicts.</p></li>
<li><p><strong>key</strong> (<em>Union</em><em>[</em><em>Hashable</em><em>, </em><em>Type</em><em>[</em><em>monty.json.MSONable</em><em>]</em><em>]</em>) – A dictionary key or MSONable class to locate.</p></li>
<li><p><strong>include_end</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to include the key in the route. This has no effect if the key is an
MSONable class.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to return nested keys or stop at the first match.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A list of routes to where the matches were found.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>   <span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="s2">"b"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">:</span> <span class="mi">3</span><span class="p">}],</span>
<span class="gp">... </span>   <span class="s2">"c"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"d"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"x"</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_key</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">)</span>
<span class="go">[['a', 1], ['c', 'd']]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">find_key</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">,</span> <span class="n">include_end</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[['a', 1, 'x'], ['c', 'd', 'x']]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">nested</span></code> argument can be used to control the behaviour of nested keys.
&gt;&gt;&gt; data = {“a”: {“x”: {“x”: 1}}, “b”: {“x”: 0}}
&gt;&gt;&gt; find_key(data, “x”, nested=False)
[[‘a’], [‘b’]]
&gt;&gt;&gt; find_key(data, “x”, nested=True)
[[‘a’], [‘a’, ‘x’], [‘b’]]</p>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.find_key_value">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">find_key_value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#find_key_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.find_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the route to key: value pairs in a dictionary.</p>
<p>This function works on nested dictionaries, lists, and tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>Union</em><em>[</em><em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Any</em><em>]</em><em>]</em>) – A dict or list of dicts.</p></li>
<li><p><strong>key</strong> (<em>Hashable</em>) – A dictionary key.</p></li>
<li><p><strong>value</strong> (<em>Hashable</em>) – A value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A tuple of routes to where the matches were found.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>   <span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="s2">"b"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">:</span> <span class="mi">3</span><span class="p">}],</span>
<span class="gp">... </span>   <span class="s2">"c"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"d"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"x"</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">... </span><span class="n">find_key_value</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">(('a', 1), ('c', 'd'))</span>
</pre></div>
</div>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.update_in_dictionary">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">update_in_dictionary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">updates</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#update_in_dictionary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.update_in_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a dictionary (in place) at specific locations with a new values.</p>
<p>This function works on nested dictionaries and those containing lists or tuples.</p>
<p>For example:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
d = {</p>
<blockquote>
<div><p>“a”: [0, {“b”: 1, “x”: 2}],
“c”: {</p>
<blockquote>
<div><p>“d”: {“x”: 3}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}
update_in_dictionary(d, {(‘a’, 1, ‘x’): 100, (‘c’, ‘d’, ‘x’): 100})</p>
<p># d = {
#     “a”: [0, {“b”: 1, “x”: 100}],
#     “c”: {
#         “d”: {“x”: 100}
#     }
# }
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em>) – A dictionary to update.</p></li>
<li><p><strong>updates</strong> (<em>Dict</em><em>[</em><em>Tuple</em><em>, </em><em>Any</em><em>]</em>) – The updates to perform, as a dictionary of {location: update}.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.initialize_logger">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">initialize_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">20</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#initialize_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.initialize_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the default logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The log level.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A logging instance with customized formatter and handlers.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.contains_activity_or_job">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">contains_activity_or_job</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arg</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#contains_activity_or_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.contains_activity_or_job" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>arg</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="activities.core.util.suuid">
<code class="sig-prename descclassname">activities.core.util.</code><code class="sig-name descname">suuid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/activities/core/util.html#suuid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#activities.core.util.suuid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="activities.managers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">activities.managers package</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="activities.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">activities package</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, hackingmaterials
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/activities.core.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">activities.core package</a><ul>
<li><a class="reference internal" href="#module-activities.core.activity">activities.core.activity module</a></li>
<li><a class="reference internal" href="#module-activities.core.dict_mods">activities.core.dict_mods module</a></li>
<li><a class="reference internal" href="#module-activities.core.graph">activities.core.graph module</a></li>
<li><a class="reference internal" href="#module-activities.core.job">activities.core.job module</a></li>
<li><a class="reference internal" href="#module-activities.core.maker">activities.core.maker module</a></li>
<li><a class="reference internal" href="#module-activities.core.reference">activities.core.reference module</a></li>
<li><a class="reference internal" href="#module-activities.core.util">activities.core.util module</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>