<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="jobflow.managers" href="jobflow.managers.html" /><link rel="prev" title="jobflow" href="jobflow.html" />

    <meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>jobflow.core - jobflow</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato, -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato, -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato, -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato, -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">jobflow</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">jobflow</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
</ul>
<p><span class="caption-text">User Interface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="job.html">Job</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
</ul>
<p><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to jobflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hackingmaterials/jobflow">jobflow on GitHub</a></li>
</ul>
<p><span class="caption-text">Function Reference</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="jobflow.html">API reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">jobflow.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobflow.managers.html">jobflow.managers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="jobflow-core">
<h1>jobflow.core<a class="headerlink" href="#jobflow-core" title="Permalink to this headline">¶</a></h1>
<section id="module-jobflow.core.flow">
<span id="jobflow-core-flow"></span><h2>jobflow.core.flow<a class="headerlink" href="#module-jobflow.core.flow" title="Permalink to this headline">¶</a></h2>
<p>Define base Flow object.</p>
<dl class="py class">
<dt id="jobflow.core.flow.JobOrder">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.flow.</span></code><code class="sig-name descname"><span class="pre">JobOrder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#JobOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.JobOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="jobflows.utils.html#jobflow.utils.enum.ValueEnum" title="jobflow.utils.enum.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.utils.enum.ValueEnum</span></code></a></p>
<p>Options to control the order of job execution.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AUTO</span></code>: Automatically determine the job order based on input and output
references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LINEAR</span></code>: Run the jobs in the order they appear in the jobs array.</p></li>
</ul>
<dl class="py attribute">
<dt id="jobflow.core.flow.JobOrder.AUTO">
<code class="sig-name descname"><span class="pre">AUTO</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'auto'</span></em><a class="headerlink" href="#jobflow.core.flow.JobOrder.AUTO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.flow.JobOrder.LINEAR">
<code class="sig-name descname"><span class="pre">LINEAR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'linear'</span></em><a class="headerlink" href="#jobflow.core.flow.JobOrder.LINEAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.flow.Flow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.flow.</span></code><code class="sig-name descname"><span class="pre">Flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">jobs</span></em>, <em class="sig-param"><span class="pre">output=None</span></em>, <em class="sig-param"><span class="pre">name='Flow'</span></em>, <em class="sig-param"><span class="pre">order=&lt;JobOrder.AUTO:</span> <span class="pre">'auto'&gt;</span></em>, <em class="sig-param"><span class="pre">uuid=None</span></em>, <em class="sig-param"><span class="pre">host=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A Flow contains a collection of Jobs or other Flows to execute.</p>
<p>The <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a> object is the main tool for constructing workflows. Flows
can either contain Jobs or other Flows. Like <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects, Flow objects
can also have outputs, however, these are not explicitly stored in the database.
Instead, the outputs of a Flow act to structure the outputs of the jobs
contained within the Flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobs</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><em>Flow</em></a><em>, </em><em>jobflow.Job</em><em>]</em><em>]</em><em>, </em><em>jobflow.Job</em><em>, </em><a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><em>Flow</em></a><em>]</em>) – The jobs to be run as a list of <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> or <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a> objects.</p></li>
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The output of the flow. These should come from the output of one or more
of the jobs.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The flow name.</p></li>
<li><p><strong>order</strong> (<a class="reference internal" href="#jobflow.core.flow.JobOrder" title="jobflow.core.flow.JobOrder"><em>JobOrder</em></a>) – The order in which the jobs should be exectuted. The default is to determine
the order automatically based on the connections between jobs.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the flow. This is genenrated automatically.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the host flow. This is set automatically when an flow
is included in the jobs array of another flow.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If a job in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array is already part of another flow.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the inputs of all jobs in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array are
    missing.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the flow <code class="docutils literal notranslate"><span class="pre">output</span></code> are missing.</p></li>
</ul>
</dd>
<dt class="field-odd">Warns</dt>
<dd class="field-odd"><p><strong>UserWarning</strong> – If a <code class="docutils literal notranslate"><span class="pre">.Job</span></code> or <code class="docutils literal notranslate"><span class="pre">Flow</span></code> object is used as the Flow <code class="docutils literal notranslate"><span class="pre">output</span></code> rather
than an <code class="docutils literal notranslate"><span class="pre">OutputReference</span></code>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-jobflow.core.job" title="jobflow.core.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.JobOrder" title="jobflow.core.flow.JobOrder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobOrder</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Below we define a simple job to add two numbers, and create an flow containing
two connected add jobs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_first</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_second</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">add_first</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">])</span>
</pre></div>
</div>
<p>This flow does not expose any of the outputs of the jobs contained within it.
We could instead “register” the output of the second add as the output of the
flow.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">add_second</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>This will allow the flow to be used in another flow. In this way, Flows
can be infinitely nested. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_third</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">flow</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">flow</span><span class="p">,</span> <span class="n">add_third</span><span class="p">])</span>
</pre></div>
</div>
<p>Flows can be run using an flow manager. These enable running Flows
locally or on compute clusters (using the FireWorks manager).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow.managers.local</span> <span class="kn">import</span> <span class="n">run_locally</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">run_locally</span><span class="p">(</span><span class="n">flow</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.job_uuids">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">job_uuids</span></code><a class="headerlink" href="#jobflow.core.flow.Flow.job_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p>The uuids of every Job contained in the Flow (including nested Flows).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The uuids of all Jobs in the Flow (including nested Flows).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.graph">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">graph</span></code><a class="headerlink" href="#jobflow.core.flow.Flow.graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a graph indicating the connectivity of jobs in the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The graph showing the connectivity of the jobs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DiGraph</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.draw_graph">
<code class="sig-name descname"><span class="pre">draw_graph</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.draw_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.draw_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the flow graph using matplotlib.</p>
<p>Requires matplotlib to be installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The matplotlib pyplot state.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pyplot</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.iterflow">
<code class="sig-name descname"><span class="pre">iterflow</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.iterflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.iterflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through the jobs of the flow.</p>
<p>The jobs are yielded such that the job output references can always be
resolved. I.e., root nodes of the flow graph are always returned first.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>Job, list[str]</em> – The Job and the uuids of any parent jobs (not to be confused with the host
flow).</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the kwargs of all Jobs in the Flow.</p>
<p>Note that updates will be applied to jobs in nested Flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the job name.</p></li>
<li><p><strong>function_filter</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – Only filter matching functions.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflows.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider a flow containing a simple job with a <code class="docutils literal notranslate"><span class="pre">number</span></code> keyword argument.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all jobs in the flow have a kwarg called number. However,
when this is not the case this will result in the bad input kwargs for some
jobs. To only apply the update to the correct jobs, filters can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filter</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">add</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.update_maker_kwargs">
<code class="sig-name descname"><span class="pre">update_maker_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.update_maker_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.update_maker_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of any <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects in the jobs.</p>
<p>Note that updates will be applied to Jobs in any inner Flows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Maker</em><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflows.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following flow containing jobs from a Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all Makers in the flow have a kwarg called number.
However, when this is not the case this will result in the bad input kwargs
for some Makers. To only apply the update to the correct Makers, filters can be
used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filder</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. Consider the following case
for a Maker that produces a job that restarts.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">RestartMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"restart"</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">restart_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="n">restart_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">RestartMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">my_job</span><span class="p">]</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">RestartMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
</section>
<section id="module-jobflow.core.job">
<span id="jobflow-core-job"></span><h2>jobflow.core.job<a class="headerlink" href="#module-jobflow.core.job" title="Permalink to this headline">¶</a></h2>
<p>This module defines functions and classes for representing Job objects.</p>
<dl class="py function">
<dt id="jobflow.core.job.job">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">job_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.job" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a function to produce a <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects are delayed function calls that can be used in an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code>. A job is a composed of the function name and source and any
arguments for the function. This decorator makes it simple to create
job objects directly from a function definition. See the examples for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – A function to wrap. This should not be specified directly and is implied
by the decorator.</p></li>
<li><p><strong>**job_kwargs</strong> – Other keyword arguments that will get passed to the <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> init method.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_message</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">"I am a Job"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span> <span class="o">=</span> <span class="n">print_message</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">print_job</span><span class="p">)</span>
<span class="go">&lt;class 'jobflow.core.job.Job'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span><span class="o">.</span><span class="n">function_source</span>
<span class="go">'__main__'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span><span class="o">.</span><span class="n">function_name</span>
<span class="go">'print_message'</span>
</pre></div>
</div>
<p>Jobs can have required and optional parameters.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span> <span class="o">=</span> <span class="n">print_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_args</span>
<span class="go">(1, )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_kwargs</span>
<span class="go">{"b": 2}</span>
</pre></div>
</div>
<p>If the function returns a value it can be referenced using the <code class="docutils literal notranslate"><span class="pre">output</span></code>
attribute of the job.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span><span class="o">.</span><span class="n">output</span>
<span class="go">Reference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9')</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the task has not yet been run, the output value is <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code>
object. References are automatically converted to their computed values
(resolved) when the task runs.</p>
</div>
<p>If a dictionary of values is returned, the values can be indexed in the usual
way.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">"sum"</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"product"</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">"sum"</span><span class="p">]</span>
<span class="go">Reference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9', 'sum')</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If an output is indexed incorrectly, for example by trying to access a key that
doesn’t exist, this error will only be raised when the Job is executed.</p>
</div>
<p>Jobs can return <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> objects that control the flow execution flow.
For example, to replace the current jub with another job, <code class="docutils literal notranslate"><span class="pre">replace</span></code> can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">replace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">new_job</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="n">new_job</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a></p>
</div>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.Job">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">Job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">function_source</span></em>, <em class="sig-param"><span class="pre">function_name</span></em>, <em class="sig-param"><span class="pre">function_args=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">function_kwargs=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">output_schema=None</span></em>, <em class="sig-param"><span class="pre">uuid=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">index=1</span></em>, <em class="sig-param"><span class="pre">name=None</span></em>, <em class="sig-param"><span class="pre">data=False</span></em>, <em class="sig-param"><span class="pre">metadata=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">config=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">host=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> is a delayed function call that can be used in an <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a>.</p>
<p>In general, one should not create <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects directly but instead use
the <a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator on a function. Any calls to a decorated function will
return an <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function_source</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>MSONable</em><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em><em>]</em>) – The source of the function. Can be <code class="docutils literal notranslate"><span class="pre">"builtins"</span></code> for builtin functions,
a module name, or an <code class="xref py py-obj docutils literal notranslate"><span class="pre">MSONable</span></code> class instance. Additionally,
static and class methods can be specified using a tuple of
<code class="docutils literal notranslate"><span class="pre">(module_name,</span> <span class="pre">class_name,</span> <span class="pre">bool)</span></code> where the bool is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> for class
methods and <code class="docutils literal notranslate"><span class="pre">False</span></code> for static methods.</p></li>
<li><p><strong>function_name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The function name.</p></li>
<li><p><strong>function_args</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>..</em><em>]</em>) – The positional arguments to the function call.</p></li>
<li><p><strong>function_kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The keyword arguments to the function call.</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>BaseModel</em><em>]</em><em>]</em>) – A <code class="xref py py-obj docutils literal notranslate"><span class="pre">Schema</span></code> object that defines the schema of the output.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A unique identifier for the job. Generated automatically.</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the job (number of times the job has been replaced).</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The name of the job. If not set it will be determined from <code class="docutils literal notranslate"><span class="pre">function_source</span></code>
and <code class="docutils literal notranslate"><span class="pre">function_name</span></code>.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – A dictionary of information that will get stored alongside the job output.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig"><em>JobConfig</em></a>) – The config setting for the job.</p></li>
<li><p><strong>host</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The UUID of the host flow.</p></li>
<li><p><strong>data</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><p><strong>output</strong> (<a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><em>Reference</em></a>) – The output of the job. This is a reference to the future job output and
can be used as the input to other Jobs or Flows.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A job.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job">Job</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Builtin functions such as <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#print" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print</span></code></a> can be specified using the <code class="docutils literal notranslate"><span class="pre">builtins</span></code>
module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_task</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"builtins"</span><span class="p">,</span> <span class="s2">"print"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"I am a job"</span><span class="p">,</span> <span class="p">))</span>
</pre></div>
</div>
<p>Other functions should specify the full module path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"os.path"</span><span class="p">,</span> <span class="s2">"join"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"folder"</span><span class="p">,</span> <span class="s2">"filename.txt"</span><span class="p">))</span>
</pre></div>
</div>
<p>To use custom functions in a job, the functions should be importable (i.e. not
defined in another function). For example, if the following function is defined
in the <code class="docutils literal notranslate"><span class="pre">my_package</span></code> module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="p">(</span><span class="s2">"my_package"</span><span class="p">,</span> <span class="s2">"add"</span><span class="p">),</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>More details are given in the <a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator docstring.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
</div>
<dl class="py method">
<dt id="jobflow.core.job.Job.function_type">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">function_type</span></code><a class="headerlink" href="#jobflow.core.job.Job.function_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the function.</p>
<p>The potential options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: A standalone function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: An instance method of a class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">classmethod</span></code>: A classmethod of a class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">staticmethod</span></code>: A staticmethod of class.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The function type.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.input_references">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_references</span></code><a class="headerlink" href="#jobflow.core.job.Job.input_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Find <a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects in the job inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The references in the inputs to the job.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference">Reference</a>, ..)</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.input_uuids">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_uuids</span></code><a class="headerlink" href="#jobflow.core.job.Job.input_uuids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.graph">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">graph</span></code><a class="headerlink" href="#jobflow.core.job.Job.graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a graph of the job indicating the inputs to the job.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The graph showing the connectivity of the jobs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DiGraph</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.set_uuid">
<code class="sig-name descname"><span class="pre">set_uuid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.set_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.set_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the UUID of the job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A UUID.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the job.</p>
<p>If the job has inputs that are <a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects, then they will need
to be resolved before the job can run. See the docstring for
<a class="reference internal" href="#jobflow.core.reference.Reference.resolve" title="jobflow.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>store</strong> (<em>jobflow.JobStore</em>) – A maggma store to use for resolving references and storing job outputs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A the response of the job, containing the outputs, and other settings
that determine the flow execution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response">Response</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the job function cannot be imported.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a>, <a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.resolve_args">
<code class="sig-name descname"><span class="pre">resolve_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">store</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;ReferenceFallback.ERROR:</span> <span class="pre">'error'&gt;</span></em>, <em class="sig-param"><span class="pre">inplace=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.resolve_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.resolve_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve any <a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code></a> objects in the input arguments.</p>
<p>See the docstring for <a class="reference internal" href="#jobflow.core.reference.Reference.resolve" title="jobflow.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>jobflow.JobStore</em>) – A maggma store to use for resolving references.</p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.ReferenceFallback" title="jobflow.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – What to do if the reference cannot be resolved. See the docstring
for <a class="reference internal" href="#jobflow.core.reference.Reference.resolve" title="jobflow.core.reference.Reference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference.resolve</span></code></a> for the available options.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Update the arguments of the current job or return a new job object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A job with the references resolved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job">Job</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.matches_function">
<code class="sig-name descname"><span class="pre">matches_function</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.matches_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.matches_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Find whether the job corresponds to a function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the job is a call to the function provided.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – </p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the kwargs of the jobs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the job name.</p></li>
<li><p><strong>function_filter</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – Only filter matching functions.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflows.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider a flow containing a simple job with a <code class="docutils literal notranslate"><span class="pre">number</span></code> keyword argument.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument can be updated using.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.update_maker_kwargs">
<code class="sig-name descname"><span class="pre">update_maker_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.update_maker_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.update_maker_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of any <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects in the job source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Maker</em><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflows.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following job from a Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. Consider the following case
for a Maker that produces a job that restarts.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">RestartMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"restart"</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">restart_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">restart</span><span class="o">=</span><span class="n">restart_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">RestartMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">RestartMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – Dict representation.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MSONable class.</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.Response">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">Response</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stored_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_children</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_flows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> contains the output, detours, and stop commands of a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The job output.</p></li>
<li><p><strong>detour</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – A flow or job to detour to.</p></li>
<li><p><strong>restart</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – A flow or job to replace the current job.</p></li>
<li><p><strong>store</strong> – Data to be stored by the flow manager.</p></li>
<li><p><strong>stop_children</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop any children of the current flow.</p></li>
<li><p><strong>stop_flows</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop executing all remaining jobs.</p></li>
<li><p><strong>addition</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>stored_data</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py method">
<dt id="jobflow.core.job.Response.from_job_returns">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_job_returns</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Response.from_job_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Response.from_job_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> from the outputs of a <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_returns</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – <p>The outputs of a job. Should be a single or list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Restart</span></code>, or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code> objects. Only
one of each type of object is supported.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code> objects should not be specified
simultaneously. The outputs of the detour flow will be used instead.</p>
</div>
</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>BaseModel</em><em>]</em><em>]</em>) – The outputs class associated with the job. Used to enforce a schema for the
outputs. Currently, only a warning will be given if the job outputs do not
match the expected outputs class.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The job response controlling the data to store and flow execution options.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response">Response</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the job returns type ares not <code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code>,
    <code class="xref py py-obj docutils literal notranslate"><span class="pre">Restart</span></code>, or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code> objects.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If more than one of the same return type is given.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Outputs</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Detour</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Restart</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stop</span></code></p>
</div>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.JobConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">JobConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">resolve_references=True</span></em>, <em class="sig-param"><span class="pre">on_missing_references=&lt;ReferenceFallback.ERROR:</span> <span class="pre">'error'&gt;</span></em>, <em class="sig-param"><span class="pre">manager_config=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">expose_store=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#JobConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.JobConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>The configuration parameters for a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resolve_references</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to resolve any references before the job function is executed.
If <code class="docutils literal notranslate"><span class="pre">False</span></code> the unresolved reference objects will be passed into the function
call.</p></li>
<li><p><strong>on_missing_references</strong> (<a class="reference internal" href="#jobflow.core.reference.ReferenceFallback" title="jobflow.core.reference.ReferenceFallback"><em>jobflow.core.reference.ReferenceFallback</em></a>) – What to do if the references cannot be resolved. The default is to throw an
error.</p></li>
<li><p><strong>manager_config</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – The configuration settings to control the manager execution.</p></li>
<li><p><strong>expose_store</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to expose the store in <code class="xref py py-obj docutils literal notranslate"><span class="pre">CURRENT_JOB`</span></code> when the job is running.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobConfig</span></code></a> object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig">JobConfig</a></p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.maker">
<span id="jobflow-core-maker"></span><h2>jobflow.core.maker<a class="headerlink" href="#module-jobflow.core.maker" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="jobflow.core.maker.Maker">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.maker.</span></code><code class="sig-name descname"><span class="pre">Maker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'Maker'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/abc.html#abc.ABC" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a>, <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py attribute">
<dt id="jobflow.core.maker.Maker.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">'Maker'</span></em><a class="headerlink" href="#jobflow.core.maker.Maker.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="jobflow.core.maker.Maker.make">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">make</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker.make"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker.make" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[jobflow.Flow, jobflow.Job]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.maker.Maker.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – </p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><em>Maker</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
<section id="module-jobflow.core.reference">
<span id="jobflow-core-reference"></span><h2>jobflow.core.reference<a class="headerlink" href="#module-jobflow.core.reference" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="jobflow.core.reference.ReferenceFallback">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">ReferenceFallback</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#ReferenceFallback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.ReferenceFallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="jobflows.utils.html#jobflow.utils.enum.ValueEnum" title="jobflow.utils.enum.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.utils.enum.ValueEnum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt id="jobflow.core.reference.ReferenceFallback.ERROR">
<code class="sig-name descname"><span class="pre">ERROR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'error'</span></em><a class="headerlink" href="#jobflow.core.reference.ReferenceFallback.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.ReferenceFallback.NONE">
<code class="sig-name descname"><span class="pre">NONE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'none'</span></em><a class="headerlink" href="#jobflow.core.reference.ReferenceFallback.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.ReferenceFallback.PASS">
<code class="sig-name descname"><span class="pre">PASS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'pass'</span></em><a class="headerlink" href="#jobflow.core.reference.ReferenceFallback.PASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.reference.Reference">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">Reference</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#Reference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.3.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
<li><p><strong>attributes</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>..</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.Reference.uuid">
<code class="sig-name descname"><span class="pre">uuid</span></code><a class="headerlink" href="#jobflow.core.reference.Reference.uuid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.Reference.attributes">
<code class="sig-name descname"><span class="pre">attributes</span></code><a class="headerlink" href="#jobflow.core.reference.Reference.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.Reference.output_schema">
<code class="sig-name descname"><span class="pre">output_schema</span></code><a class="headerlink" href="#jobflow.core.reference.Reference.output_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.Reference.resolve">
<code class="sig-name descname"><span class="pre">resolve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">store=None</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;ReferenceFallback.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#Reference.resolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.Reference.resolve" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>Optional</em><em>[</em><em>jobflow.JobStore</em><em>]</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.ReferenceFallback" title="jobflow.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.Reference.set_uuid">
<code class="sig-name descname"><span class="pre">set_uuid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#Reference.set_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.Reference.set_uuid" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.Reference.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#Reference.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.Reference.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON serializable dict representation of an object.</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.resolve_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">resolve_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">references</span></em>, <em class="sig-param"><span class="pre">store</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;ReferenceFallback.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#resolve_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>references</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference"><em>Reference</em></a><em>]</em>) – </p></li>
<li><p><strong>store</strong> (<em>jobflow.JobStore</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.ReferenceFallback" title="jobflow.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[<a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference">Reference</a>, Any]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.find_and_get_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">find_and_get_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#find_and_get_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.find_and_get_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>arg</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference internal" href="#jobflow.core.reference.Reference" title="jobflow.core.reference.Reference">jobflow.core.reference.Reference</a>, ..]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.find_and_resolve_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">find_and_resolve_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">arg</span></em>, <em class="sig-param"><span class="pre">store</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;ReferenceFallback.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#find_and_resolve_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.find_and_resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>Any</em>) – </p></li>
<li><p><strong>store</strong> (<em>jobflow.JobStore</em>) – </p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – </p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.ReferenceFallback" title="jobflow.core.reference.ReferenceFallback"><em>ReferenceFallback</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.validate_schema_access">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">validate_schema_access</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#validate_schema_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.validate_schema_access" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema</strong> (<em>Type</em><em>[</em><em>pydantic.main.BaseModel</em><em>]</em>) – </p></li>
<li><p><strong>item</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.schema">
<span id="jobflow-core-schema"></span><h2>jobflow.core.schema<a class="headerlink" href="#module-jobflow.core.schema" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="jobflow.core.schema.with_reference">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.schema.</span></code><code class="sig-name descname"><span class="pre">with_reference</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">atype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/schema.html#with_reference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.schema.with_reference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt id="jobflow.core.schema.allow_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.schema.</span></code><code class="sig-name descname"><span class="pre">allow_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/schema.html#allow_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.schema.allow_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new BaseModel with the exact same fields as <cite>model</cite> but making them all optional</p>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.schema.Schema">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.schema.</span></code><code class="sig-name descname"><span class="pre">Schema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/schema.html#Schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.schema.Schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.core.schema._BaseSchema</span></code></p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises ValidationError if the input data cannot be parsed to form a valid model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra_data</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.state">
<span id="jobflow-core-state"></span><h2>jobflow.core.state<a class="headerlink" href="#module-jobflow.core.state" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-jobflow.core.store">
<span id="jobflow-core-store"></span><h2>jobflow.core.store<a class="headerlink" href="#module-jobflow.core.store" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="jobflow.core.store.JobStore">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.store.</span></code><code class="sig-name descname"><span class="pre">JobStore</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs_store</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">maggma.core.store.Store</span></code></p>
<p>Store intended to allow pushing and pulling documents into multiple stores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>docs_store</strong> (<em>Store</em>) – Store for basic documents.</p></li>
<li><p><strong>data_store</strong> (<em>Store</em>) – Maggma store for large data objects.</p></li>
<li><p><strong>save</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – List of keys to save in the data store when uploading documents.</p></li>
<li><p><strong>load</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – List of keys to load from the data store when querying.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.name">
<code class="sig-name descname"><span class="pre">name</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of the data source.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string representing this data source.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.connect">
<code class="sig-name descname"><span class="pre">connect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force_reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the source data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force_reset</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to reset the connection or not.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.close">
<code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes any connections.</p>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.count">
<code class="sig-name descname"><span class="pre">count</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of documents matching the query criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to count in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of documents matching the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.query">
<code class="sig-name descname"><span class="pre">query</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the JobStore for documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search in.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in grouped documents.</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of documents to skip.</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limit on the total number of documents returned.</p></li>
<li><p><strong>load</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – List of keys to load from the data store.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>Dict</em> – The documents.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Iterator[Dict]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.query_one">
<code class="sig-name descname"><span class="pre">query_one</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.query_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.query_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the Store for a single document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in the document.</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>load</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – List of keys to load from the data store.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The document.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a> or <a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.update">
<code class="sig-name descname"><span class="pre">update</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update or insert documents into the Store</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>docs</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>Dict</em><em>]</em>) – The document or list of documents to update.</p></li>
<li><p><strong>key</strong> (<em>Union</em><em>[</em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Field name(s) to determine uniqueness for a document, can be a list of
multiple fields, a single field, or None if the Store’s key field is to
be used.</p></li>
<li><p><strong>save</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – List of keys to save in the data store when uploading documents.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.ensure_index">
<code class="sig-name descname"><span class="pre">ensure_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.ensure_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.ensure_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to create an index on document store and return true if it succeeded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Single key to index.</p></li>
<li><p><strong>unique</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether or not this index contains only unique keys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the index exists/was created correctly.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.groupby">
<code class="sig-name descname"><span class="pre">groupby</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.groupby"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple grouping function that will group documents by keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Fields to group documents.</p></li>
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search in.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in grouped documents</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of documents to skip.</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limit on the total number of documents returned.</p></li>
<li><p><strong>load</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Hashable</em><em>, </em><em>List</em><em>[</em><em>Hashable</em><em>]</em><em>]</em><em>]</em>) – List of keys to load from the data store.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>dict, list[dict]</em> – The documents as (key, documents) grouped by their keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Tuple[Dict, List[Dict]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.remove_docs">
<code class="sig-name descname"><span class="pre">remove_docs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.remove_docs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.remove_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove docs matching the criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>Dict</em>) – Criteria for documents to remove.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.collection">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">collection</span></code><a class="headerlink" href="#jobflow.core.store.JobStore.collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.from_store">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_store</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.from_store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.from_store" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new job store that uses the same store for documents and data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>maggma.core.store.Store</em>) – A maggma store.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments that will be passed to the JobStore init method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore">JobStore</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.get_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.get_output" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
<li><p><strong>which</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – </p></li>
<li><p><strong>load</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>, </em><em>List</em><em>[</em><em>Type</em><em>[</em><em>MSONable</em><em>]</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.from_db_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_db_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.from_db_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.from_db_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an JobStore from a database file.</p>
<p>Multiple options are supported for the database file. The file should be in
json or yaml format.</p>
<p>The simplest format is a monty dumped version of the store, generated using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">monty.serialization</span> <span class="kn">import</span> <span class="n">dumpfn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dumpfn</span><span class="p">(</span><span class="s2">"job_store.json"</span><span class="p">,</span> <span class="n">job_store</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, the format can be a dictionary containing the docs_store and
data_store keys, with the values as the dictionary representation of those
stores.</p>
<p>Alternatively, a file format specific to mongodb is supported. Here the file
should contain the keys:</p>
<ul>
<li><p>host (str): The hostname of the database.</p></li>
<li><p>port (int): The port used to access the database.</p></li>
<li><p>collection (str): The collection in which to store documents.</p></li>
<li><p>authsource (str, optional): Authorization source for connecting to the
database.</p></li>
<li><p>host_uri (str, optional): URI string specifying the database and login
details. If this is specified, any other authentication information will be
ignored.</p></li>
<li><p>admin_user (str, optional): The username for an account with admin privileges.</p></li>
<li><p>admin_password (str, optional): The password for an account with admin
privileges.</p></li>
<li><p>readonly_user (str, optional): The username for an account with read
privileges only.</p></li>
<li><p>readonly_password (str, optional): The password for an account with read
privileges only.</p></li>
<li><p>data_store_kwargs (dict, optional): Keyword arguments that determine where
to store large calculation data (band structures, density of states, charge
density etc). Leaving this argument blank indicates that GridFS will be used.
Alternatively, the following stores and keyword arguments are supported:</p></li>
<li><p>docs_store_kwargs: Additional keyword arguments that are passed to the
MongoStore (and, optionally, GridFSStore if no data_store_kwargs are given).</p>
<p><strong>S3 Store kwargs</strong></p>
<ul class="simple">
<li><p>bucket (str): The S3 bucket where the data is stored.</p></li>
<li><p>s3_profile (str): The S3 profile that contains the login information
typically found at ~/.aws/credentials.</p></li>
<li><p>compress (bool): Whether compression is used.</p></li>
<li><p>endpoint_url (str): The URL used to access the S3 store.</p></li>
</ul>
</li>
<li><p>data_store_prefix (str, optional): The prefix for the collection used
for the datastore.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_file</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Path</em><em>]</em>) – Path to the file containing the credentials.</p></li>
<li><p><strong>admin</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em>) – Whether to use the admin user (only applicable to the mongodb style file
format).</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments that get passed to the JobStore
constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An JobStore.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore">JobStore</a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="jobflow.managers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">jobflow.managers</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="jobflow.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">jobflow</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, hackingmaterials
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">jobflow.core</a><ul>
<li><a class="reference internal" href="#module-jobflow.core.flow">jobflow.core.flow</a></li>
<li><a class="reference internal" href="#module-jobflow.core.job">jobflow.core.job</a></li>
<li><a class="reference internal" href="#module-jobflow.core.maker">jobflow.core.maker</a></li>
<li><a class="reference internal" href="#module-jobflow.core.reference">jobflow.core.reference</a></li>
<li><a class="reference internal" href="#module-jobflow.core.schema">jobflow.core.schema</a></li>
<li><a class="reference internal" href="#module-jobflow.core.state">jobflow.core.state</a></li>
<li><a class="reference internal" href="#module-jobflow.core.store">jobflow.core.store</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>